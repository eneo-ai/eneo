# ============================================================================
# ENEO FRONTEND ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and update values for your environment
# ============================================================================

# ----------------------------------------------------------------------------
# Backend Connection (REQUIRED)
# ----------------------------------------------------------------------------
# SSR backend URL (server-side)
INTRIC_BACKEND_URL="http://localhost:8123"

# Client-side backend URL (browser - must start with PUBLIC_)
PUBLIC_INTRIC_BACKEND_URL="http://localhost:8123"

# [OPTIONAL] Server-to-server override (e.g., Docker: http://backend:8123)
INTRIC_BACKEND_SERVER_URL=

# ----------------------------------------------------------------------------
# Security (REQUIRED)
# ----------------------------------------------------------------------------
# Cookie signing key (must match backend JWT_SECRET)
JWT_SECRET="1234"

# ----------------------------------------------------------------------------
# Authentication Configuration
# ----------------------------------------------------------------------------
# Choose ONE of two modes:
#   1. Single-Tenant OIDC: One shared IdP for all users (recommended for most)
#   2. Multi-Tenant Federation: Each tenant has their own IdP (enterprise)
# ----------------------------------------------------------------------------

# SINGLE-TENANT OIDC MODE (Default - Recommended)
# Direct login via one identity provider (Auth0, Entra ID, Keycloak, etc.)
# Users are automatically redirected to the IdP login page
# ----------------------------------------------------------------------------
# OIDC discovery endpoint URL (auto-configures authorization/token/jwks endpoints)
# Examples:
#   Auth0: https://{your-domain}.auth0.com/.well-known/openid-configuration
#   Azure/Entra ID: https://login.microsoftonline.com/{tenant-id}/v2.0/.well-known/openid-configuration
#   Keycloak: https://{keycloak-url}/realms/{realm-name}/.well-known/openid-configuration
OIDC_DISCOVERY_ENDPOINT=

# OIDC client credentials (from your IdP application registration)
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=

# PUBLIC_ORIGIN (REQUIRED for OIDC authentication)
# The externally-reachable URL where users access Eneo
# Must match the backend PUBLIC_ORIGIN and IdP redirect_uri configuration
# Examples:
#   Development: https://localhost:3000
#   Production: https://eneo.yourcompany.com
#   Via proxy: https://m00-https-eneo-test.login.sundsvall.se
PUBLIC_ORIGIN=https://localhost:3000

# MULTI-TENANT FEDERATION MODE (Enterprise Only)
# Enable per-tenant identity providers (each tenant configures their own IdP)
# Requires ENCRYPTION_KEY in backend and tenant configuration via API
# ----------------------------------------------------------------------------
FEDERATION_PER_TENANT_ENABLED=false

# ----------------------------------------------------------------------------
# Legacy Authentication (DEPRECATED - Use OIDC_* variables instead)
# ----------------------------------------------------------------------------
# MobilityGuard
# DEPRECATED: Use OIDC_DISCOVERY_ENDPOINT instead
# MobilityGuard IS an OIDC provider - use the generic OIDC configuration above:
#   OIDC_DISCOVERY_ENDPOINT=https://login.mobilityguard.com/.well-known/openid-configuration
#   OIDC_CLIENT_ID=your-client-id
#   OIDC_CLIENT_SECRET=your-client-secret
# MOBILITY_GUARD_AUTH="https://..."
# MOBILITYGUARD_CLIENT_ID="eneo"

# Zitadel (Open-source identity platform)
# DEPRECATED: Use OIDC_DISCOVERY_ENDPOINT instead
# Zitadel IS an OIDC provider - use the generic OIDC configuration above:
#   OIDC_DISCOVERY_ENDPOINT=https://your-zitadel-instance.com/.well-known/openid-configuration
#   OIDC_CLIENT_ID=your-client-id
#   OIDC_CLIENT_SECRET=your-client-secret
# ZITADEL_INSTANCE_URL="https://your-zitadel-instance.com"
# ZITADEL_PROJECT_CLIENT_ID="your-zitadel-client-id"

# Legacy authentication bypass (for development only)
# FORCE_LEGACY_AUTH=False

# ----------------------------------------------------------------------------
# UI Feature Flags (OPTIONAL)
# ----------------------------------------------------------------------------
# Enable optional UI features
# ⚠️  DEPRECATED_SHOW_TEMPLATES=false
#     DEPRECATED: This static flag is no longer used. Template visibility is now
#     controlled dynamically per-tenant via the admin settings panel
#     ("Aktivera mallar" / "Enable Templates" toggle). The setting is stored in
#     the database (using_templates flag) and changes take effect immediately
#     without requiring a server restart. This environment variable will be
#     removed in the next release.
# SHOW_WEB_SEARCH=False
# SHOW_HELP_CENTER=False

# ----------------------------------------------------------------------------
# External Services (OPTIONAL)
# ----------------------------------------------------------------------------
# Feedback and support links
# FEEDBACK_FORM_URL="https://..."
# REQUEST_INTEGRATION_FORM_URL="https://..."
# HELP_CENTER_URL="https://www.eneo.ai/en/external-support-assistant"
# SUPPORT_EMAIL="support@eneo.ai"
# SALES_EMAIL="sales@eneo.ai"

# ----------------------------------------------------------------------------
# Development & Debugging
# ----------------------------------------------------------------------------
# Enable verbose OIDC authentication logging (debug mode)
# Shows response headers, error details, and request metadata
# Useful for diagnosing redirect_uri mismatches, OAuth errors, etc.
# Default: Enabled in development mode, disabled in production
# ENABLE_VERBOSE_FRONTEND_LOGGING=false

# See environment.server.ts and flags.server.ts for additional options
